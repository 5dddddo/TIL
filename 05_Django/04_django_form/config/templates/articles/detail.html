{% extends 'base.html' %}
{% block body %}
<h1>DEATIL</h1>
<hr>
글 번호 : {{article.pk}}<br>
제목 : {{article.title}}<br>
컨탠츠 : {{article.content}}<br>
생성시각 : {{article.created_at}}<br>
업뎃시각 : {{article.updated_at}}<br>
<hr>

<a href="{% url 'articles:index' %}" class="btn btn-primary">[BACK]</a>

{% if  request.user == article.user %}
<form action="{% url 'articles:delete' article.pk %}" method="POST" style="display:inline"
  onclick="return confirm('삭제하시겠습니까? ')">
  {% csrf_token %}
  <input type="submit" value="DELETE" class="btn btn-danger">
</form>
<a href="{% url 'articles:update' article.pk %}" class="btn btn-info">[EDIT]</a>
{% endif %}
<hr>
{% if user.is_authenticated %}
<form action="{% url 'articles:comments_create' article.pk%}" method='POST'>
  {% csrf_token %}
  {{comment_form}}
  <input type="submit" value="댓글 작성" class="btn btn-success">
</form>
{% else %}
  <a href="{% url 'articles:index' %}" class="btn btn-primary">[댓글을 작성하려면 로그인해주세요]</a>
{% endif %}
<hr>
<p><b>댓글 목록({{ comments|length }}개)</b></p>
{% for comment in comments %}
<p>[{{ forloop.counter }}] {{ comment.content}} </p>
<form action="{% url 'articles:comments_delete' article.pk comment.pk %}" method='POST'>
  {% csrf_token %}
  {% if comment.user == user %}
  <input type="submit" value="댓글 삭제" class="btn btn-warning">
  {% endif %}
</form>
{% endfor %}
{% endblock %}